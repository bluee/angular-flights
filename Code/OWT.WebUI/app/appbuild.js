var app=angular.module("app",["ngRoute","pickadate","angular-loading-bar"]);app.config(["$routeProvider",function(a){a.when("/",{controller:"MainController"}).when("/:sfrom/:sto/:sdate",{controller:"SearchController",templateUrl:"/app/views/results.html"}).otherwise({redirectTo:"/"})}]);;app.controller("MainController",["$scope","$location","commonRepository",function(a,b,c){a.search={from:"BNE",to:"SYD",datefrom:new Date},a.data={airports:c.getAirports()},a.searchButton=function(){var b=moment(a.search.datefrom).format("YYYY-MM-DD"),c="/#/"+a.search.from+"/"+a.search.to+"/"+b;window.location=c}}]);;app.controller("SearchController",["$scope","$routeParams","commonRepository",function(a,b,c){a.data={airports:c.getAirports()},a.search={from:c.getAirport(b.sfrom),to:c.getAirport(b.sto),datefrom:moment(b.sdate).format("MMMM Do YYYY")};var d=function(){c.searchFlights(a.search).then(function(b){a.searchresult=_.sample(b,4)},function(a){})};d()}]);;app.factory("commonRepository",["$http","$q","$cacheFactory",function(a,b,c){return{getAirports:function(){return[{airport_type:"large_airport",name:"Brisbane International Airport",loc:{type:"Point",coordinates:[153.1170044,-27.38419914]},continent:"OC",iso_country:"AU",iso_region:"AU-QLD",municipality:"Brisbane",iata_code:"BNE"},{airport_type:"large_airport",name:"Sydney Kingsford Smith International Airport",loc:{type:"Point",coordinates:[151.177002,-33.94609833]},continent:"OC",iso_country:"AU",iso_region:"AU-NSW",municipality:"Sydney",iata_code:"SYD"},{airport_type:"medium_airport",name:"Adelaide International Airport",loc:{type:"Point",coordinates:[138.5310059,-34.94499969]},continent:"OC",iso_country:"AU",iso_region:"AU-SA",municipality:"Adelaide",iata_code:"ADL"},{airport_type:"large_airport",name:"Perth International Airport",loc:{type:"Point",coordinates:[115.9670029,-31.94029999]},continent:"OC",iso_country:"AU",iso_region:"AU-WA",municipality:"Perth",iata_code:"PER"},{airport_type:"medium_airport",name:"Melbourne International Airport",loc:{type:"Point",coordinates:[-80.64530182,28.10280037]},continent:"NA",iso_country:"US",iso_region:"US-FL",municipality:"Melbourne",iata_code:"MLB"}]},getAirport:function(a){return _.find(this.getAirports(),{iata_code:a})},searchFlights:function(c){var d=b.defer();return a.get("/api/Flights/",{cache:!1}).success(d.resolve).error(d.reject),d.promise}}}]);;angular.module("app").run(["$templateCache",function(a){"use strict";a.put("results.html",'<div class=jumbotron id=searchresults>{{search.from.municipality}} ({{search.from.iata_code}}) to {{search.to.municipality}} ({{search.to.iata_code}}) Departing {{search.datefrom}}<br><br><table class="table table-hover"><thead><tr><td>Carrier</td><td>Flight</td><td>Depart</td><td>Arrive</td><td>Fare</td><td></td></tr></thead><tbody><tr ng-repeat="item in searchresult"><td>{{item.Carrier}}</td><td>{{item.Flight}}</td><td>{{item.Depart}}</td><td>{{item.Arrive}}</td><td>{{item.Fare}}</td><td><input type="radio"> Select</td></tr></tbody></table></div>')}]);